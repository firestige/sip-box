# 开发日记

## 2021-8-16

参考Netty的Http实现，学习编写Sip的编码器

对于Tcp这样的流协议，提供如下模型
```
###############    ###############    ###############   ###################
# HttpRequest #    # HttpContent #    # HttpContent #   # LastHttpContent #
###############    ###############    ###############   ###################
```
解码时由于消息可能还在传输，所以从缓冲区分段节码，最后由`LastHttpContent`表示结束。

先写个UDP专用的Decoder，然后再考虑同时处理TCP和UDP以及传输层协议切换的事情

Sip协议本身没有chunk，但是由于RFC没有规定长度限制，不论UDP还是TCP传输都要考虑IP分包的情况